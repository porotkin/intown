{"version":3,"sources":["views/SubscribeButton.js","constants.js","views/Friends.js","views/GeoButton.js","panels/Marker.js","views/Gmap.js","views/Main.js","index.js"],"names":["SubscribeButton","props","subscribeToggle","state","subscribed","setState","on","text","fetch","mode","this","onClick","React","Component","Constants","SERVER_API_ADDRESS","Friends","getFriends","a","bridge","send","method","request_id","params","fields","order","access_token","v","then","data","friends","response","items","console","log","catch","error","user_id","subscribers","id","headers","json","map","friend","before","size","src","photo_50","after","includes","description","first_name","last_name","GeoButton","style","textAlign","marginTop","divStyle","position","top","left","width","height","backgroundColor","border","borderRadius","userSelect","transform","pStyle","fontSize","Marker","name","Gmap","getGeo","geoLocation","lat","lng","long","FriendsCoordinates","marginLeft","marginRight","bootstrapURLKeys","key","center","zoom","Friend","defaultProps","Main","activeStory","onStoryChange","bind","e","currentTarget","dataset","story","tabbar","selected","data-story","fill","activePanel","separator","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e9cfb340.chunk.js","sourcesContent":["import React from 'react';\r\nimport {Div, Button} from '@vkontakte/vkui';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\n\r\nclass SubscribeButton extends React.Component {\r\n    constructor (props) {\r\n        super(props);\r\n        this.state = this.props.subscribed\r\n            ? {on: 'secondary', text: \"Отписаться\", subscribed: true}\r\n            : {on: 'primary', text: \"Подписаться\", subscribed: false};\r\n    }\r\n\r\n    subscribeToggle = () => {\r\n        if (!this.state.subscribed) {\r\n            this.setState({on: 'secondary', text: 'Отписаться', subscribed: true})\r\n            fetch()\r\n        } else {\r\n            this.setState({on: 'primary', text: 'Подписаться', subscribed: false})\r\n        }\r\n    }\r\n\r\n    render () {\r\n        return (\r\n                <Div >\r\n                    <Button mode={this.state.on} onClick={this.subscribeToggle}>{this.state.text}</Button>\r\n                </Div>\r\n        )\r\n    }\r\n}\r\nexport default SubscribeButton","export default class Constants {\r\n    static SERVER_API_ADDRESS = \"https://bc51e15b5e75.ngrok.io/\";\r\n}\r\n","import React from 'react';\r\nimport {Group, Header, Avatar} from '@vkontakte/vkui';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport SubscribeButton from \"./SubscribeButton\";\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport SimpleCell from \"@vkontakte/vkui/dist/components/SimpleCell/SimpleCell\";\r\nimport Constants from \"../constants\";\r\n\r\nclass Friends extends React.Component {\r\n    constructor (props) {\r\n        super(props);\r\n        this.state = {\r\n          access_token: null,\r\n          friends: null,\r\n          user_id: null,\r\n          subscribers: null,\r\n        };\r\n        bridge.send(\"VKWebAppGetUserInfo\", {}).then((data) => {\r\n            this.setState({\r\n                user_id: data.id\r\n            });\r\n        })\r\n        bridge.send(\"VKWebAppGetAuthToken\", {\"app_id\": 7550756, \"scope\": \"friends\"})\r\n            .then(data => {\r\n                this.setState({\r\n                    access_token: data.access_token\r\n                })\r\n                this.getFriends()\r\n                fetch(Constants.SERVER_API_ADDRESS + \"user/\" + this.state.user_id, {\r\n                    mode: \"cors\",\r\n                    method: \"GET\",\r\n                    headers: {\r\n                        'Content-Type': 'application/json'\r\n                    },\r\n                }).then((response) => {\r\n                    response.json().then((data) => {\r\n                        this.setState({\r\n                            subscribers: data\r\n                        });\r\n                    });\r\n                });\r\n            });\r\n    }\r\n\r\n    getFriends = async () => {\r\n        await bridge\r\n            .send('VKWebAppCallAPIMethod', {method: \"friends.get\", request_id: \"32test\", params: {\r\n                    fields: \"id, photo_50\", order: \"name\", access_token: this.state.access_token,\r\n                    v: \"5.122\",\r\n                }})\r\n            .then(data => {\r\n                this.setState({\r\n                    friends: data.response.items\r\n                });\r\n                console.log(data)\r\n            })\r\n            .catch(error => {\r\n                // Handling an error\r\n                console.log(error);\r\n            });\r\n    }\r\n\r\n    render () {\r\n        return (\r\n            <Group>\r\n                <Header mode=\"secondary\">Список друзей</Header>\r\n                {this.state.friends ? this.state.friends.map((friend) => {\r\n                    return <SimpleCell before={<Avatar size={48} src={friend.photo_50}/>} after={<SubscribeButton subscribed={ this.state.subscribers ? this.state.subscribers.includes(friend.id) : false } />} description={friend.id}>{friend.first_name + ' ' + friend.last_name}</SimpleCell>\r\n                }) : <SimpleCell>Loading</SimpleCell>}\r\n            </Group>\r\n        )\r\n    }\r\n}\r\nexport default Friends","import React from 'react';\r\nimport {Div, Button} from '@vkontakte/vkui';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\n\r\nclass GeoButton extends React.Component {\r\n    constructor (props) {\r\n        super(props);\r\n    }\r\n    render () {\r\n        return (\r\n                <Div style={{textAlign: 'center', marginTop: '3%'}}>\r\n                    <Button mode=\"commerce\" size='xl' onClick={this.props.onClick}>Поделиться геопозицией</Button>\r\n                </Div>\r\n        )\r\n    }\r\n}\r\nexport default GeoButton","import React from 'react';\r\n\r\nconst divStyle = {\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n    width: '15px',\r\n    height: '15px',\r\n    backgroundColor: '#0cb',\r\n    border: '2px solid #fff',\r\n    borderRadius: '40%',\r\n    userSelect: 'none',\r\n    transform: 'translate(-50%, -50%)'\r\n}\r\nconst pStyle = {\r\n    width: '500px',\r\n    transform: 'translate(-10%, 0)',\r\n    fontSize: '15pt'\r\n}\r\n\r\nclass Marker extends React.Component {\r\n    render() {\r\n        return <div style={divStyle}><p style={pStyle} >{this.props.name}</p></div>\r\n    }\r\n}\r\nexport default Marker;","import {Group} from '@vkontakte/vkui';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport React from 'react';\r\nimport GeoButton from \"./GeoButton\";\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport GoogleMapReact from 'google-map-react';\r\nimport Marker from '../panels/Marker'\r\n\r\nclass Gmap extends React.Component {\r\n    constructor (props) {\r\n        super(props);\r\n        this.state = {geoLocation: null}\r\n    }\r\n    static defaultProps = {\r\n        center:{\r\n            lat:30,\r\n            lng:30\r\n        },\r\n        zoom: 11\r\n    };\r\n    FriendsCoordinates\r\n\r\n    getGeo = async () =>  {\r\n        await bridge.send('VKWebAppGetGeodata')\r\n        .then(data => {\r\n            this.setState({\r\n                geoLocation: {\r\n                    lat:data.lat,\r\n                    lng:data.long,\r\n                }\r\n            })\r\n        });\r\n    }\r\n\r\n    render () {\r\n        if (this.state.geoLocation)\r\n            this.FriendsCoordinates = [\r\n                {name: 'Michael Porotkin', lat: this.state.geoLocation.lat-1 , lng: this.state.geoLocation.lng},\r\n                {name: 'Some One', lat: this.state.geoLocation.lat, lng: this.state.geoLocation.lng+1}\r\n        ];\r\n        return (\r\n            <Group style={{\r\n                height: '65vh', width: '95%',\r\n                marginLeft: \"auto\",\r\n                marginRight: \"auto\"\r\n            }}>\r\n            <GoogleMapReact\r\n                bootstrapURLKeys={{ key: 'AIzaSyCA-CWX9xnTnxGmzIxkH_WIsGUrdeRI444' }}\r\n                center={this.state.geoLocation ? this.state.geoLocation : this.props.center}\r\n                zoom={this.props.zoom}\r\n            >\r\n                {this.state.geoLocation ? <Marker lat={this.state.geoLocation.lat} lng={this.state.geoLocation.lng} name={'Artem Buslaev'}/>:''}\r\n                {this.FriendsCoordinates ? this.FriendsCoordinates.map((Friend) => {\r\n                    return <Marker lat={Friend.lat} lng={Friend.lng} name={Friend.name}/>}):''}\r\n            </GoogleMapReact>\r\n            <GeoButton onClick={this.getGeo}/>\r\n            </Group>\r\n        )\r\n    }\r\n}\r\nexport default Gmap","import React from 'react';\r\nimport {Epic, Panel, PanelHeader, Tabbar, TabbarItem, View} from '@vkontakte/vkui';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport Icon28PlayRectangleStackOutline from '@vkontakte/icons/dist/28/play_rectangle_stack_outline';\r\nimport Icon28LocationOutline from '@vkontakte/icons/dist/28/location_outline';\r\nimport Friends from \"./Friends\";\r\nimport Gmap from \"./Gmap\";\r\n\r\nclass Main extends React.Component {\r\n    constructor (props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            activeStory: 'Subs',\r\n            friends: null,\r\n        };\r\n        this.onStoryChange = this.onStoryChange.bind(this);\r\n\r\n    }\r\n\r\n    onStoryChange (e) {\r\n        this.setState({ activeStory: e.currentTarget.dataset.story })\r\n    }\r\n\r\n    render () {\r\n\r\n        return (\r\n            <Epic activeStory={this.state.activeStory} tabbar={\r\n                <Tabbar>\r\n                    <TabbarItem\r\n                        onClick={this.onStoryChange}\r\n                        selected={this.state.activeStory === 'Subs'}\r\n                        data-story=\"Subs\"\r\n                        text=\"Подписки\"\r\n                    ><Icon28PlayRectangleStackOutline fill='#FF7F50' /></TabbarItem>\r\n                    <TabbarItem\r\n                        onClick={this.onStoryChange}\r\n                        selected={this.state.activeStory === 'Geo'}\r\n                        data-story=\"Geo\"\r\n                        text=\"Геолокация\"\r\n                    ><Icon28LocationOutline fill='#228B22'/></TabbarItem>\r\n\r\n                </Tabbar>\r\n            }>\r\n                <View id=\"Subs\" activePanel=\"Subs\">\r\n                    <Panel id=\"Subs\">\r\n                        <PanelHeader separator={false}>Подписки</PanelHeader>\r\n                            <Friends/>\r\n                    </Panel>\r\n                </View>\r\n                <View id=\"Geo\" activePanel=\"Geo\" >\r\n                    <Panel id=\"Geo\">\r\n                        <PanelHeader separator={false}>Геолокация</PanelHeader>\r\n                        <Gmap />\r\n                    </Panel>\r\n                </View>\r\n            </Epic>\r\n        )\r\n    }\r\n}\r\nexport default Main","import \"core-js/features/map\";\r\nimport \"core-js/features/set\";\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport Main from \"./views/Main\"\r\n\r\n// Init VK  Mini App\r\nbridge.send(\"VKWebAppInit\").then();\r\n\r\nReactDOM.render(<Main />, document.getElementById(\"root\"));\r\nif (process.env.NODE_ENV === \"development\") {\r\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\r\n}\r\n"],"sourceRoot":""}